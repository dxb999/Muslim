<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…ÙŠØ²Ø§Ù† Ø£Ø¹Ù…Ø§Ù„ÙŠ</title>
  <style>
    body {
      font-family: 'Tahoma';
      background-color: #f5f5f5;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 { color: #2e7d32; }
    .container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    .column {
      background-color: white;
      padding: 20px;
      width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    .column h2 { margin-top: 0; }
    input, button, select {
      padding: 8px;
      margin: 5px;
      width: 80%;
    }
    ul {
      list-style-type: none;
      padding: 0;
      margin: 15px 0;
    }
    li {
      margin-bottom: 5px;
      background-color: #e0f2f1;
      padding: 8px;
      border-radius: 5px;
      cursor: pointer;
    }
    .summary {
      margin-top: 30px;
      font-size: 1.2em;
      color: #333;
    }

    /* ØªØ°ÙƒÙŠØ± */
    .reminder-box {
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      padding: 20px;
      margin: 40px auto 20px;
      width: 80%;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    .reminder-box button {
      background-color: #ffc107;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 5px;
      cursor: pointer;
    }

    /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø¨Ø± */
    .grave-meter-box {
      background-color: #fdecea;
      color: #611a15;
      border: 1px solid #f5c6cb;
      padding: 20px;
      margin: 30px auto;
      width: 80%;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    .progress-container {
      background-color: #f8d7da;
      border-radius: 20px;
      overflow: hidden;
      height: 25px;
      margin: 10px 0;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background-color: #dc3545;
      transition: width 0.5s ease-in-out;
    }

    /* Ø§Ù„ØªØ®ÙÙŠÙ */
    .mitigation-box{
      background:#e9f3ff; color:#0f3b79; border:1px solid #cfe3ff;
      padding:20px; margin:30px auto; width:80%;
      border-radius:10px; box-shadow:0 0 10px #ccc;
    }
    .mitigation-box h2{ margin-top:0 }
    .miti-buttons{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap }
    .miti-buttons button{
      padding:10px 14px; border:none; border-radius:8px; background:#1976d2; color:#fff; cursor:pointer;
    }
    .miti-note{ margin-top:8px; font-size:.95em }

    /* Ø§Ù„Ø¥Ù†ÙÙˆØ¬Ø±Ø§ÙÙŠÙƒ (Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø¬Ù†Ø© ÙˆØ§Ù„Ù†Ø§Ø±) */
    .infobox{
      background:#ffffff;border:1px solid #eaeaea;color:#1b1b1b;
      padding:20px;margin:30px auto;width:80%;
      border-radius:10px;box-shadow:0 0 10px #ccc;text-align:center;
    }
    .infobox h2{margin:0 0 12px}
    .infogrid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));
      gap:16px;justify-items:center;align-items:center;margin-top:10px;
    }

    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ø¨Ø¨ Ø¨Ø¯Ø§Ø¦Ø±Ø© SVG */
    .reason{
      width:120px;height:140px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;user-select:none
    }
    .ringwrap{position:relative;width:120px;height:120px}
    .ringwrap .inner{
      position:absolute;inset:28px;border-radius:50%;background:#fff;
      display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;padding:6px;text-align:center;
      box-shadow:0 2px 8px rgba(0,0,0,.06);
    }
    .inner .icon{font-size:24px;line-height:1}
    .inner .label{font-size:12px;color:#333}
    .inner .times{font-size:11px;color:#666}

    .count{
      position:absolute;bottom:-6px;right:-6px;background:#2e7d32;color:#fff;
      font-size:11px;border-radius:12px;padding:2px 6px;box-shadow:0 2px 6px rgba(0,0,0,.15)
    }
    .bad .count{background:#dc3545}

    /* SVG: Ø³Ù…Ø§ÙƒØ© 30 + ØªØ¯Ø±Ù‘Ø¬ + Ù„Ù…Ø¹Ø© */
    .svg{transform:rotate(-90deg)}
    .track{stroke:#e5e5e5;stroke-width:30;fill:none}
    .prog-good{stroke-width:30;fill:none;transition:stroke-dashoffset .25s;filter:drop-shadow(0 0 8px rgba(46,125,50,.6))}
    .prog-bad {stroke-width:30;fill:none;transition:stroke-dashoffset .25s;filter:drop-shadow(0 0 8px rgba(220,53,69,.6))}

    /* Ø§Ù„Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ */
    .final-judgment-box {
      background-color: #e8f5e9;
      color: #1b5e20;
      border: 1px solid #c8e6c9;
      padding: 20px;
      margin: 30px auto;
      width: 80%;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    .judgment-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 20px 0;
      gap: 30px;
    }
    .judgment-column { width: 100px; text-align: center; }
    .judgment-meter {
      width: 40px; height: 200px; background-color: #ddd;
      border-radius: 20px; position: relative; overflow: hidden;
    }
    #judgmentIndicator {
      position: absolute; width: 100%; height: 0%; bottom: 0;
      background: linear-gradient(to top, #dc3545, #ffc107, #4caf50);
      transition: height 0.5s ease-in-out;
    }
  </style>
</head>
<body>
  <h1>ğŸ“– Ù…ÙŠØ²Ø§Ù† Ø£Ø¹Ù…Ø§Ù„ÙŠ</h1>

  <div class="container">
    <div class="column" id="good">
      <h2>âœ… Ø§Ù„Ø­Ø³Ù†Ø§Øª</h2>
      <input type="text" id="goodDesc" placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„" />
      <input type="number" id="goodPoints" placeholder="Ø§Ù„Ø¯Ø±Ø¬Ø©" />
      <ul id="goodList"></ul>
      <strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="goodTotal">0</span></strong>
    </div>

    <div class="column" id="bad">
      <h2>âŒ Ø§Ù„Ø³ÙŠØ¦Ø§Øª</h2>
      <input type="text" id="badDesc" placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„" />
      <input type="number" id="badPoints" placeholder="Ø§Ù„Ø¯Ø±Ø¬Ø©" />
      <ul id="badList"></ul>
      <strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="badTotal">0</span></strong>
    </div>
  </div>

  <div class="summary">
    âš–ï¸ Ø§Ù„ÙØ§Ø±Ù‚ = <span id="netResult">0</span> Ù†Ù‚Ø·Ø©
  </div>

  <!-- ØªØ°ÙƒÙŠØ± -->
  <div class="reminder-box">
    <h2>â˜ ï¸ Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø± â€“ ØªØ°ÙƒÙŠØ± ÙˆØªØ­Ø°ÙŠØ±</h2>
    <p id="reminderText">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„ØªØªØ°ÙƒØ± Ø§Ù„Ø¢Ø®Ø±Ø©...</p>
    <button onclick="showReminder()">Ø°ÙƒØ±Ù†ÙŠ Ø§Ù„ÙŠÙˆÙ…</button>
  </div>

  <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø¨Ø± -->
  <div class="grave-meter-box">
    <h2>ğŸ“‰ Ø¹Ø¯Ø§Ø¯ Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±</h2>
    <div class="progress-container">
      <div id="graveProgress" class="progress-bar"></div>
    </div>
    <p id="graveLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: Ø¢Ù…Ù†</p>
  </div>

  <!-- Ø§Ù„ØªØ®ÙÙŠÙ -->
  <div class="mitigation-box">
    <h2>ğŸ›¡ï¸ Ø§Ù„ØªØ®ÙÙŠÙ Ù…Ù† Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±</h2>
    <div class="miti-buttons">
      <button onclick="applyMitigation('tawba')">ØªÙˆØ¨Ø© Ù†ØµÙˆØ­</button>
      <button onclick="applyMitigation('surahMulk')">Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ Ù„ÙŠÙ„Ø§Ù‹</button>
      <button onclick="applyMitigation('repayDebt')">Ø³Ø¯Ø§Ø¯ Ø¯ÙŠÙ†/Ø±Ø¯ Ù…Ø¸Ù„Ù…Ø©</button>
      <button onclick="applyMitigation('cutNamimah')">Ù‚Ø·Ø¹ Ø§Ù„Ù†Ù…ÙŠÙ…Ø©</button>
    </div>
    <div id="mitigationNote" class="miti-note">ÙƒÙ„ Ø®ÙŠØ§Ø± Ù…ØªØ§Ø­ Ù…Ø±Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©.</div>
  </div>

  <!-- Ø§Ù„Ø¥Ù†ÙÙˆØ¬Ø±Ø§ÙÙŠÙƒ: Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø¬Ù†Ø© ÙˆØ§Ù„Ù†Ø§Ø± -->
  <div class="infobox" id="reasonsBox">
    <h2>ğŸ§­ Ø£Ø³Ø¨Ø§Ø¨ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¬Ù†Ø© ÙˆØ§Ù„Ù†Ø§Ø±</h2>
    <div class="infogrid" id="reasonsGrid"></div>
    <div style="margin-top:8px;font-size:13px;color:#666">
      Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¨Ø¨ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø«Ø± (Ø­Ù„Ù‚Ø© Ø¯Ø§Ø¦Ø±ÙŠØ©). ÙƒÙ„ Ø¶ØºØ·Ø© ØªØ¶ÙŠÙ Ù†Ù‚Ø§Ø·Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.
    </div>
  </div>

  <!-- Ø§Ù„Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ -->
  <div class="final-judgment-box">
    <h2>ğŸŒŒ Ø§Ù„Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h2>
    <div class="judgment-container">
      <div class="judgment-column"><h3>ğŸŒ´ Ø§Ù„Ø¬Ù†Ø©</h3></div>
      <div class="judgment-meter"><div id="judgmentIndicator"></div></div>
      <div class="judgment-column"><h3>ğŸ”¥ Ø§Ù„Ù†Ø§Ø±</h3></div>
    </div>
    <p id="judgmentResult">â¬…ï¸ ÙŠØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø­Ø³Ø¨ Ø£Ø¹Ù…Ø§Ù„Ùƒ...</p>
  </div>

  <script>
    let goodTotal = 0;
    let badTotal  = 0;

    /* Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ØªØ®ÙÙŠÙ */
    const K_GOOD = 0.6; // ÙˆØ²Ù† ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø³Ù†Ø§Øª
    const MITIGATION_POINTS = { tawba:25, surahMulk:10, repayDebt:35, cutNamimah:20 };
    let mitigationTotal = 0;

    function addEntry(type) {
      const desc = document.getElementById(`${type}Desc`).value;
      const points = parseInt(document.getElementById(`${type}Points`).value);
      if (!desc || isNaN(points)) return;

      const list = document.getElementById(`${type}List`);
      const li = document.createElement('li');
      li.textContent = `${desc} (${points} Ù†Ù‚Ø·Ø©)`;
      li.onclick = () => {
        list.removeChild(li);
        if (type === 'good') {
          goodTotal -= points;
          document.getElementById('goodTotal').textContent = goodTotal;
        } else {
          badTotal -= points;
          document.getElementById('badTotal').textContent = badTotal;
        }
        updateAll();
      };
      list.appendChild(li);

      if (type === 'good') {
        goodTotal += points;
        document.getElementById('goodTotal').textContent = goodTotal;
      } else {
        badTotal += points;
        document.getElementById('badTotal').textContent = badTotal;
      }

      document.getElementById(`${type}Desc`).value = '';
      document.getElementById(`${type}Points`).value = '';
      updateAll();
    }

    function updateAll() {
      updateNetResult();
      updateGraveMeter();
      autoUpdateFinalJudgment();
    }

    function updateNetResult() {
      const net = goodTotal - badTotal;
      document.getElementById('netResult').textContent = net;
    }

    function showReminder() {
      const reminders = [
        "ÙƒØ§Ù† Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù† Ø¥Ø°Ø§ Ø°ÙÙƒØ± Ø§Ù„Ù‚Ø¨Ø± Ø¨ÙƒÙ‰ Ø­ØªÙ‰ ØªØ¨ØªÙ„ Ù„Ø­ÙŠØªÙ‡.",
        "Ø§Ù„Ù‚Ø¨Ø± Ø£ÙˆÙ„ Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ø¢Ø®Ø±Ø©ØŒ ÙØ¥Ù† Ù†Ø¬Ø§ Ù…Ù†Ù‡ ÙÙ…Ø§ Ø¨Ø¹Ø¯Ù‡ Ø£ÙŠØ³Ø±.",
        "Ø£ÙƒØ«Ø±ÙˆØ§ Ù…Ù† Ø°ÙƒØ± Ù‡Ø§Ø¯Ù… Ø§Ù„Ù„Ø°Ø§Øª: Ø§Ù„Ù…ÙˆØª.",
        "Ø§Ù„Ù„Ù‡Ù… Ù‚ÙÙ†Ø§ Ø¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±ØŒ ÙˆØ«Ø¨Ù‘ØªÙ†Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø¤Ø§Ù„.",
        "Ø§Ø³ØªØ¹Ø¯ÙˆØ§ Ù„Ù„Ù‚Ø¨Ø±ØŒ ÙØ¥Ù† Ø§Ù„Ù„ÙŠÙ„ ÙˆØ§Ù„Ù†Ù‡Ø§Ø± ÙŠØ¹Ù…Ù„Ø§Ù† ÙÙŠÙƒÙ…."
      ];
      const text = reminders[Math.floor(Math.random() * reminders.length)];
      document.getElementById('reminderText').textContent = text;
    }

    /* Ø§Ù„ØªØ®ÙÙŠÙ: Ù…Ø±Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø© Ù„ÙƒÙ„ Ø®ÙŠØ§Ø± */
    function canUseMitigation(key){
      const t = localStorage.getItem('miti_'+key);
      if(!t) return true;
      const hrs = (Date.now()-parseInt(t,10))/(1000*60*60);
      return hrs >= 24;
    }
    function markMitigationUsed(key){
      localStorage.setItem('miti_'+key, Date.now().toString());
    }
    function applyMitigation(key){
      const note = document.getElementById('mitigationNote');
      if(!MITIGATION_POINTS[key]) return;
      if(!canUseMitigation(key)){
        note.textContent = "â³ Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ø³ØªÙØ®Ø¯Ù… Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 24 Ø³Ø§Ø¹Ø©.";
        return;
      }
      mitigationTotal += MITIGATION_POINTS[key];
      markMitigationUsed(key);
      note.textContent = "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ®ÙÙŠÙ. Ø§Ø«Ø¨Øª Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ø¹Ø© ÙˆØ§ØªØ±Ùƒ Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø®Ø·Ø±.";
      updateAll();
    }

    /* Ø­Ø³Ø§Ø¨ Ø®Ø·Ø± Ø§Ù„Ù‚Ø¨Ø± (0..100) Ù…Ø¹ Ø§Ù„ØªØ®ÙÙŠÙ */
    function computeGraveRisk(){
      let risk = badTotal - K_GOOD*goodTotal - mitigationTotal;
      if(risk < 0) risk = 0;
      if(risk > 100) risk = 100;
      return Math.round(risk);
    }

    function updateGraveMeter() {
      const levelText = document.getElementById("graveLevel");
      const progressBar = document.getElementById("graveProgress");
      const risk = computeGraveRisk(); // 0..100

      progressBar.style.width = risk + "%";

      let label = "Ø¢Ù…Ù†";
      if (risk > 10 && risk <= 30) label = "ØªØ­Ø°ÙŠØ± Ø¨Ø³ÙŠØ·";
      else if (risk > 30 && risk <= 60) label = "Ø®Ø·Ø± Ù…ØªÙˆØ³Ø· âš ï¸";
      else if (risk > 60 && risk < 90) label = "Ø§Ù‚ØªØ±Ø§Ø¨ Ù…Ù† Ø§Ù„Ø¹Ø°Ø§Ø¨ ğŸ˜Ÿ";
      else if (risk >= 90) label = "ğŸ”¥ Ø´Ø¯ÙŠØ¯ Ø§Ù„Ø®Ø·Ø± â€“ ØªØ¨ Ù‚Ø¨Ù„ ÙÙˆØ§Øª Ø§Ù„Ø£ÙˆØ§Ù†";

      levelText.textContent = "Ø§Ù„Ù…Ø³ØªÙˆÙ‰: " + label;
    }

    function autoUpdateFinalJudgment() {
      const result = document.getElementById("judgmentResult");
      const indicator = document.getElementById("judgmentIndicator");
      const net = goodTotal - badTotal;
      let heightPercent = 50;

      if (net > 100) { result.textContent = "ğŸ¥‡ Ø£Ø¹Ù…Ø§Ù„Ùƒ Ø¹Ø¸ÙŠÙ…Ø©ØŒ ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø¬Ù†Ø© Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡!"; heightPercent = 100; }
      else if (net > 50) { result.textContent = "ğŸŒ¿ Ù…ØµÙŠØ±Ùƒ Ø§Ù„Ø¬Ù†Ø© Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ØŒ ÙˆØ§ØµÙ„ Ø§Ù„Ø«Ø¨Ø§Øª."; heightPercent = 80; }
      else if (net > 0) { result.textContent = "ğŸ¤² Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚ØŒ ÙˆØ§ØµÙ„ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØµØ§Ù„Ø­."; heightPercent = 65; }
      else if (net === 0) { result.textContent = "âš–ï¸ ØªØ¹Ø§Ø¯Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨ØŒ ÙÙƒÙ† Ù…Ù† Ø§Ù„Ù…Ø³ØªØºÙØ±ÙŠÙ†."; heightPercent = 50; }
      else if (net > -30) { result.textContent = "â— Ø®Ø·Ø±! Ø±Ø§Ø¬Ø¹ Ù†ÙØ³Ùƒ Ù‚Ø¨Ù„ ÙÙˆØ§Øª Ø§Ù„Ø£ÙˆØ§Ù†."; heightPercent = 35; }
      else if (net > -70) { result.textContent = "ğŸ”¥ ØªØ³Ø§Ø±Ø¹ Ù†Ø­Ùˆ Ø§Ù„Ø®Ø·Ø±ØŒ Ø¨Ø§Ø¯Ø± Ø¨Ø§Ù„ØªÙˆØ¨Ø©."; heightPercent = 20; }
      else { result.textContent = "ğŸš« Ù…ØµÙŠØ±Ùƒ Ø§Ù„Ù†Ø§Ø± Ø¥Ù† Ù„Ù… ØªØªØ¨ØŒ Ø§Ù„Ù„Ù‡Ù… Ø³Ù„Ù…!"; heightPercent = 5; }

      indicator.style.height = heightPercent + "%";
    }

    /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (ÙƒÙ…Ø§ ÙÙŠ ØªØµÙ…ÙŠÙ…Ùƒ) */
    const goodActions = [
      { text: "ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø± ÙÙŠ ÙˆÙ‚ØªÙ‡Ø§", points: 20 },
      { text: "Ø§Ù„ØµØ¯Ù‚Ø© Ø¹Ù„Ù‰ Ù…Ø­ØªØ§Ø¬", points: 15 },
      { text: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†", points: 10 },
      { text: "Ø¨Ø± Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†", points: 25 },
      { text: "Ø§Ù„Ø§Ø¨ØªØ³Ø§Ù…Ø© ÙÙŠ ÙˆØ¬Ù‡ Ø£Ø®ÙŠÙƒ", points: 5 },
      { text: "Ø§Ù„Ø§Ø³ØªØºÙØ§Ø± 100 Ù…Ø±Ø©", points: 12 },
      { text: "Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„", points: 18 }
    ];
    const badActions = [
      { text: "Ø§Ù„ÙƒØ°Ø¨", points: 10 },
      { text: "Ø§Ù„Ù†Ù…ÙŠÙ…Ø©", points: 15 },
      { text: "ØªØ±Ùƒ Ø§Ù„ØµÙ„Ø§Ø©", points: 25 },
      { text: "Ø¥ÙŠØ°Ø§Ø¡ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†", points: 12 },
      { text: "Ø³Ù…Ø§Ø¹ Ø§Ù„Ø­Ø±Ø§Ù…", points: 8 },
      { text: "Ù†Ø¸Ø± Ù…Ø­Ø±Ù…", points: 7 },
      { text: "Ø§Ù„ØºÙŠØ¨Ø©", points: 15 }
    ];

    function populateDropdowns() {
      const goodSelect = document.createElement("select");
      goodSelect.id = "goodSelect";
      goodSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø¹Ù…Ù„Ù‹Ø§ Ø­Ø³Ù†Ù‹Ø§</option>';
      goodActions.forEach(action => {
        const option = document.createElement("option");
        option.value = action.points;
        option.textContent = `${action.text} (+${action.points})`;
        goodSelect.appendChild(option);
      });
      const goodBtn = document.createElement("button");
      goodBtn.textContent = "Ø¥Ø¶Ø§ÙØ©";
      goodBtn.onclick = () => {
        const selected = goodSelect.options[goodSelect.selectedIndex];
        if (selected.value) {
          document.getElementById("goodDesc").value = selected.textContent;
          document.getElementById("goodPoints").value = selected.value;
          addEntry('good');
        }
      };

      const badSelect = document.createElement("select");
      badSelect.id = "badSelect";
      badSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø¹Ù…Ù„Ù‹Ø§ Ø³ÙŠØ¦Ù‹Ø§</option>';
      badActions.forEach(action => {
        const option = document.createElement("option");
        option.value = action.points;
        option.textContent = `${action.text} (-${action.points})`;
        badSelect.appendChild(option);
      });
      const badBtn = document.createElement("button");
      badBtn.textContent = "Ø¥Ø¶Ø§ÙØ©";
      badBtn.onclick = () => {
        const selected = badSelect.options[badSelect.selectedIndex];
        if (selected.value) {
          document.getElementById("badDesc").value = selected.textContent;
          document.getElementById("badPoints").value = selected.value;
          addEntry('bad');
        }
      };

      document.getElementById("good").appendChild(goodSelect);
      document.getElementById("good").appendChild(goodBtn);
      document.getElementById("bad").appendChild(badSelect);
      document.getElementById("bad").appendChild(badBtn);
    }

    /* ==== Ø¥Ù†ÙÙˆØ¬Ø±Ø§ÙÙŠÙƒ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ â€” SVG Ø¨Ø³Ù…Ø§ÙƒØ© 30 + Gradient + Glow ==== */
    const REASONS = [
      // Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø¬Ù†Ø©
      { id:'iman',     type:'good', icon:'ğŸ•‹', label:'Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†',        points:25 },
      { id:'salah',    type:'good', icon:'ğŸ•Œ', label:'Ø§Ù„ØµÙ„Ø§Ø©',          points:20 },
      { id:'birr',     type:'good', icon:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', label:'Ø¨Ø±Ù‘ Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†', points:18 },
      { id:'sadaqa',   type:'good', icon:'ğŸ¤', label:'Ø§Ù„ØµØ¯Ù‚Ø©',          points:15 },
      { id:'siyam',    type:'good', icon:'ğŸŒ™', label:'Ø§Ù„ØµÙˆÙ…',           points:12 },
      { id:'silah',    type:'good', icon:'ğŸ§¬', label:'ØµÙ„Ø© Ø§Ù„Ø±Ø­Ù…',       points:12 },
      // Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±
      { id:'kufr',     type:'bad',  icon:'ğŸš«', label:'Ø§Ù„ÙƒÙØ±/Ø§Ù„Ø´Ø±Ùƒ',     points:40 },
      { id:'tarkSalah',type:'bad',  icon:'â›”ï¸', label:'ØªØ±Ùƒ Ø§Ù„ØµÙ„Ø§Ø©',      points:30 },
      { id:'uquq',     type:'bad',  icon:'ğŸ’¢', label:'Ø¹Ù‚ÙˆÙ‚ Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†',   points:25 },
      { id:'zina',     type:'bad',  icon:'âš ï¸', label:'Ø§Ù„Ø²Ù†Ø§',           points:35 },
      { id:'riba',     type:'bad',  icon:'ğŸ’¸', label:'Ø§Ù„Ø±Ø¨Ø§',           points:25 },
      { id:'namimahR', type:'bad',  icon:'ğŸ—£ï¸', label:'Ø§Ù„Ù†Ù…ÙŠÙ…Ø©',        points:15 }
    ];
    const reasonClicks = {}; REASONS.forEach(r=>reasonClicks[r.id]=0);

    function gradientStops(type){
      return type==='bad' ? ['#dc3545','#ff7043'] : ['#2e7d32','#66bb6a'];
    }

    function createReason(r){
      const grid = document.getElementById('reasonsGrid');
      const wrap = document.createElement('div');
      wrap.className = 'reason ' + (r.type==='bad'?'bad':'good');
      wrap.id = 'reason_'+r.id;

      const ringwrap = document.createElement('div'); ringwrap.className='ringwrap';

      // SVG Ø¥Ø¹Ø¯Ø§Ø¯
      const size=120, r0=36, cx=size/2, cy=size/2, C=2*Math.PI*r0;
      const gradId=`grad_${r.type}_${r.id}`;
      const [c1,c2]=gradientStops(r.type);

      ringwrap.innerHTML = `
        <svg class="svg" width="${size}" height="${size}" viewBox="0 0 ${size} ${size}">
          <defs>
            <linearGradient id="${gradId}" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%"  stop-color="${c1}"></stop>
              <stop offset="100%" stop-color="${c2}"></stop>
            </linearGradient>
          </defs>
          <circle class="track" cx="${cx}" cy="${cy}" r="${r0}"></circle>
          <circle class="${r.type==='bad'?'prog-bad':'prog-good'}"
                  id="prog_${r.id}"
                  cx="${cx}" cy="${cy}" r="${r0}"
                  stroke="url(#${gradId})"
                  stroke-linecap="round"
                  stroke-dasharray="${C} ${C}" stroke-dashoffset="${C}"></circle>
        </svg>
      `;

      const inner = document.createElement('div'); inner.className='inner';
      inner.innerHTML = `
        <div class="icon">${r.icon}</div>
        <div class="label">${r.label}</div>
        <div class="times"><span id="t_${r.id}">0</span>Ã—</div>
      `;

      const badge = document.createElement('div'); badge.className='count'; badge.textContent='0Ã—';

      ringwrap.appendChild(inner);
      ringwrap.appendChild(badge);
      wrap.appendChild(ringwrap);

      wrap.onclick = ()=> onReasonClick(r.id, C);

      grid.appendChild(wrap);
    }

    function updateReasonVisual(id, C){
      const c = reasonClicks[id];
      const prog = document.getElementById('prog_'+id);
      if(!prog) return;
      const maxClicks = 5; // Ù†ÙØ³ Ù…Ù†Ø·Ù‚Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚: ÙƒÙ„ Ø¶ØºØ·Ø© 20% (5 Ø¶ØºØ·Ø§Øª = 100%)
      const pct = Math.min(1, c / maxClicks);
      const offset = C * (1 - pct);
      prog.style.strokeDashoffset = offset;

      const t = document.getElementById('t_'+id);
      if(t) t.textContent = c;
      const card = document.getElementById('reason_'+id);
      if(card){ const b = card.querySelector('.count'); if(b) b.textContent = c+'Ã—'; }
    }

    function onReasonClick(id, C){
      const def = REASONS.find(x=>x.id===id);
      if(!def) return;

      reasonClicks[id] = (reasonClicks[id]||0) + 1;
      if(def.type==='good'){ goodTotal += def.points; document.getElementById('goodTotal').textContent = goodTotal; }
      else { badTotal += def.points; document.getElementById('badTotal').textContent = badTotal; }

      updateReasonVisual(id, C);
      updateAll();
    }

    function renderReasons(){
      REASONS.forEach(def=>createReason(def));
      // Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø¹Ù„Ù‰ 0
      REASONS.forEach(def=>{
        const size=120, r0=36, C=2*Math.PI*r0;
        updateReasonVisual(def.id, C);
      });
    }

    /* ØªØ´ØºÙŠÙ„ */
    window.onload = () => {
      populateDropdowns();
      renderReasons();
      updateAll();
    };
  </script>
</body>
</html>
